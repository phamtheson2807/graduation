<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê Admin - Qu·∫£n l√Ω ·∫£nh t·ªët nghi·ªáp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîê</text></svg>">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'vietnamese': ['Arial', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 min-h-screen font-vietnamese">
    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <div class="text-center mb-6">
                <div class="text-4xl mb-4">üîê</div>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">ƒêƒÉng nh·∫≠p Admin</h2>
                <p class="text-gray-600">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ qu·∫£n l√Ω ·∫£nh</p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u</label>
                    <input type="password" id="adminPassword" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Nh·∫≠p m·∫≠t kh·∫©u admin" required>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105">
                    ƒêƒÉng nh·∫≠p
                </button>
            </form>
            
            <div class="mt-4 text-center">
                <a href="index.html" class="text-purple-600 hover:text-purple-700 text-sm">‚Üê Quay v·ªÅ trang ch·ªß</a>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="hidden">
        <!-- Navigation -->
        <nav class="bg-white/80 backdrop-blur-sm border-b border-purple-100">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <h1 class="text-xl font-bold text-gray-800">üîê Admin Panel</h1>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">ƒê√£ ƒëƒÉng nh·∫≠p</span>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <a href="index.html" class="text-purple-600 hover:text-purple-700 font-medium">Xem trang ch·ªß</a>
                        <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            ƒêƒÉng xu·∫•t
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="container mx-auto px-4 py-8">
            <!-- Upload Section -->
            <section class="mb-12">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-purple-100">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        üì§ Upload ·∫£nh m·ªõi
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- File Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ch·ªçn ·∫£nh</label>
                            <div class="border-2 border-dashed border-purple-300 rounded-xl p-6 text-center hover:border-purple-500 transition-colors">
                                <input type="file" id="imageUpload" accept="image/*" multiple class="hidden">
                                <label for="imageUpload" class="cursor-pointer">
                                    <div class="text-4xl mb-4">üì∑</div>
                                    <p class="text-gray-600 mb-2">Click ƒë·ªÉ ch·ªçn ·∫£nh ho·∫∑c k√©o th·∫£ v√†o ƒë√¢y</p>
                                    <p class="text-sm text-gray-400">H·ªó tr·ª£: JPG, PNG, GIF (t·ªëi ƒëa 5MB m·ªói file)</p>
                                </label>
                            </div>
                        </div>

                        <!-- Image Info -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">M√¥ t·∫£ ·∫£nh</label>
                            <textarea id="imageCaption" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 h-24 resize-none" placeholder="Nh·∫≠p m√¥ t·∫£ cho ·∫£nh..."></textarea>
                            
                            <label class="block text-sm font-medium text-gray-700 mb-2 mt-4">Danh m·ª•c</label>
                            <select id="imageCategory" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="ceremony">L·ªÖ t·ªët nghi·ªáp</option>
                                <option value="friends">C√πng b·∫°n b√®</option>
                                <option value="family">Gia ƒë√¨nh</option>
                            </select>
                            
                            <button onclick="uploadImages()" class="w-full mt-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105">
                                üì§ Upload ·∫£nh
                            </button>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div id="previewSection" class="mt-8 hidden">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Preview ·∫£nh s·∫Ω upload:</h3>
                        <div id="previewGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                    </div>
                </div>
            </section>

            <!-- Manage Images Section -->
            <section class="mb-12">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-purple-100">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                            üñºÔ∏è Qu·∫£n l√Ω ·∫£nh hi·ªán c√≥
                        </h2>
                        <div class="flex items-center space-x-4">
                            <button onclick="refreshGallery()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                                üîÑ L√†m m·ªõi
                            </button>
                            <button onclick="resetToDefaultImages()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                                üîÑ Reset m·∫∑c ƒë·ªãnh
                            </button>
                            <button onclick="clearAllImages()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                                üóëÔ∏è X√≥a t·∫•t c·∫£
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filter Controls -->
                    <div class="flex flex-wrap gap-4 mb-6">
                        <select id="filterCategory" onchange="filterImages()" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="all">T·∫•t c·∫£ danh m·ª•c</option>
                            <option value="ceremony">L·ªÖ t·ªët nghi·ªáp</option>
                            <option value="friends">C√πng b·∫°n b√®</option>
                            <option value="family">Gia ƒë√¨nh</option>
                        </select>
                        
                        <input type="text" id="searchImages" onkeyup="searchImages()" placeholder="T√¨m ki·∫øm ·∫£nh..." class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 flex-1 min-w-64">
                    </div>
                    
                    <!-- Images Grid -->
                    <div id="adminImagesGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        <!-- Images will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Share Settings & Analytics -->
            <section class="mb-12">
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-purple-100">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        üîó Chia s·∫ª & Ph√¢n t√≠ch
                    </h2>
                    
                    <div class="grid lg:grid-cols-3 gap-8">
                        <!-- Share Links -->
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-purple-700">üì§ Chia s·∫ª</h3>
                            <div class="space-y-4">
                                <!-- Public View Link -->
                                <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-200">
                                    <p class="text-sm text-gray-600 mb-2 font-medium">üëÄ Link xem c√¥ng khai (ch·ªâ xem, kh√¥ng qu·∫£n l√Ω):</p>
                                    <div class="flex items-center space-x-2 mb-2">
                                        <input type="text" id="shareLink" readonly class="flex-1 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-mono" value="">
                                        <button onclick="copyShareLink()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm transition-colors flex items-center">
                                            üìã Copy
                                        </button>
                                    </div>
                                    <p class="text-xs text-gray-500 italic">
                                        üîí Link n√†y ch·ªâ cho ph√©p ng∆∞·ªùi kh√°c xem ·∫£nh, kh√¥ng th·ªÉ upload hay x√≥a ·∫£nh
                                    </p>
                                </div>

                                <!-- QR Code Generator -->
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-200">
                                    <p class="text-sm text-gray-600 mb-2 font-medium">üì± QR Code:</p>
                                    <div class="flex items-center justify-between">
                                        <button onclick="generateQRCode()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors flex items-center">
                                            üî≤ T·∫°o QR Code
                                        </button>
                                        <button onclick="downloadQRCode()" id="downloadQR" class="bg-green-700 hover:bg-green-800 text-white px-3 py-2 rounded-lg text-sm transition-colors hidden">
                                            üíæ T·∫£i v·ªÅ
                                        </button>
                                    </div>
                                    <div id="qrCodeContainer" class="mt-4 text-center hidden">
                                        <canvas id="qrCanvas" class="mx-auto border rounded-lg"></canvas>
                                    </div>
                                </div>

                                <!-- Social Share -->
                                <div class="bg-gradient-to-r from-orange-50 to-yellow-50 p-4 rounded-xl border border-orange-200">
                                    <p class="text-sm text-gray-600 mb-3 font-medium">üåê Chia s·∫ª m·∫°ng x√£ h·ªôi:</p>
                                    <div class="flex space-x-2">
                                        <button onclick="shareToFacebook()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm flex-1 transition-colors">
                                            ÔøΩ Facebook
                                        </button>
                                        <button onclick="shareToZalo()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm flex-1 transition-colors">
                                            üí¨ Zalo
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Analytics -->
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-indigo-700">üìä Th·ªëng k√™ chi ti·∫øt</h3>
                            <div class="space-y-4">
                                <!-- Basic Stats -->
                                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-4 rounded-xl border border-indigo-200">
                                    <div class="space-y-3">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600 flex items-center">üì∑ T·ªïng s·ªë ·∫£nh:</span>
                                            <span id="totalImages" class="font-bold text-lg text-indigo-600">0</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600 flex items-center">üíæ Dung l∆∞·ª£ng:</span>
                                            <span id="totalSize" class="font-bold text-lg text-purple-600">0 MB</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600 flex items-center">üëÄ L∆∞·ª£t xem:</span>
                                            <span id="pageViews" class="font-bold text-lg text-pink-600">0</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600 flex items-center">üïí C·∫≠p nh·∫≠t:</span>
                                            <span id="lastUpdate" class="font-semibold text-sm text-gray-700">-</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Category Stats -->
                                <div class="bg-gradient-to-br from-green-50 to-teal-50 p-4 rounded-xl border border-green-200">
                                    <h4 class="font-semibold text-green-700 mb-3">üìÇ Ph√¢n lo·∫°i ·∫£nh:</h4>
                                    <div class="space-y-2" id="categoryStats">
                                        <div class="flex justify-between text-sm">
                                            <span>üéì L·ªÖ t·ªët nghi·ªáp:</span>
                                            <span class="font-semibold" id="ceremonyCount">0</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>üë´ C√πng b·∫°n b√®:</span>
                                            <span class="font-semibold" id="friendsCount">0</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Gia ƒë√¨nh:</span>
                                            <span class="font-semibold" id="familyCount">0</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Performance -->
                                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-4 rounded-xl border border-yellow-200">
                                    <h4 class="font-semibold text-orange-700 mb-3">‚ö° Hi·ªáu su·∫•t:</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span>üöÄ T·ªëc ƒë·ªô t·∫£i:</span>
                                            <span class="font-semibold" id="loadSpeed">-</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>üåê Tr·∫°ng th√°i server:</span>
                                            <span class="font-semibold" id="serverStatus">-</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span>üíΩ B·ªô nh·ªõ ƒë√£ d√πng:</span>
                                            <span class="font-semibold" id="storageUsed">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Management Tools -->
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-emerald-700">üõ†Ô∏è C√¥ng c·ª• qu·∫£n l√Ω</h3>
                            <div class="space-y-4">
                                <!-- Backup & Export -->
                                <div class="bg-gradient-to-br from-emerald-50 to-green-50 p-4 rounded-xl border border-emerald-200">
                                    <h4 class="font-semibold text-emerald-700 mb-3">üíæ Sao l∆∞u & Xu·∫•t:</h4>
                                    <div class="space-y-2">
                                        <button onclick="exportAllImages()" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üì¶ Xu·∫•t t·∫•t c·∫£ ·∫£nh
                                        </button>
                                        <button onclick="exportImageList()" class="w-full bg-teal-500 hover:bg-teal-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üìã Xu·∫•t danh s√°ch ·∫£nh
                                        </button>
                                        <button onclick="createBackup()" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üîÑ T·∫°o backup
                                        </button>
                                    </div>
                                </div>

                                <!-- Privacy & Security -->
                                <div class="bg-gradient-to-br from-pink-50 to-rose-50 p-4 rounded-xl border border-pink-200">
                                    <h4 class="font-semibold text-pink-700 mb-3">üîí B·∫£o m·∫≠t:</h4>
                                    <div class="space-y-2">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm">üëÅÔ∏è Ch·∫ø ƒë·ªô ri√™ng t∆∞:</span>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="privateMode" class="sr-only peer">
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-pink-600"></div>
                                            </label>
                                        </div>
                                        <button onclick="changePassword()" class="w-full bg-pink-500 hover:bg-pink-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üîë ƒê·ªïi m·∫≠t kh·∫©u
                                        </button>
                                        <button onclick="viewAccessLog()" class="w-full bg-rose-500 hover:bg-rose-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üìú Xem nh·∫≠t k√Ω truy c·∫≠p
                                        </button>
                                    </div>
                                </div>

                                <!-- Quick Actions -->
                                <div class="bg-gradient-to-br from-violet-50 to-purple-50 p-4 rounded-xl border border-violet-200">
                                    <h4 class="font-semibold text-violet-700 mb-3">‚ö° Thao t√°c nhanh:</h4>
                                    <div class="space-y-2">
                                        <button onclick="optimizeAllImages()" class="w-full bg-violet-500 hover:bg-violet-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üñºÔ∏è T·ªëi ∆∞u t·∫•t c·∫£ ·∫£nh
                                        </button>
                                        <button onclick="regenerateThumbnails()" class="w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üîÑ T·∫°o l·∫°i thumbnail
                                        </button>
                                        <button onclick="checkBrokenImages()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-2 px-4 rounded-lg text-sm transition-colors">
                                            üîç Ki·ªÉm tra ·∫£nh l·ªói
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Real-time Activity Feed -->
                    <div class="mt-8 bg-gradient-to-r from-gray-50 to-slate-50 p-6 rounded-xl border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-700">üìà Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h4>
                            <button onclick="refreshActivityFeed()" class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded-lg text-sm transition-colors">
                                üîÑ L√†m m·ªõi
                            </button>
                        </div>
                        <div id="activityFeed" class="space-y-2 max-h-40 overflow-y-auto">
                            <div class="text-sm text-gray-500 italic">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o...</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-8 text-center">
            <div class="w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-gray-600">ƒêang x·ª≠ l√Ω...</p>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg p-4 border-l-4 border-green-500">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <span id="toastIcon" class="text-green-500">‚úÖ</span>
                </div>
                <div class="ml-3">
                    <p id="toastMessage" class="text-sm font-medium text-gray-900"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Load API Config First -->
    <script src="api-config.js"></script>
    <script src="admin-hosting.js"></script>
</body>
</html>
